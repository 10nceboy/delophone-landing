import{s as p,I as y,r as w}from"./index-01d81e83.js";const k="+7 (999) 999-99-99",E="1234",v=120,u={connectionCode:"Ошибка связи, отправьте код повторно",connection:"Ошибка связи",wrongCode:"Вы ввели неверный код, попробуйте ещё раз",wrongNumber:"Вы ввели некорректный номер телефона",nullNumber:"Введите номер телефона",oldCode:"Код устарел, отправьте новый",noAttempts:"У вас не осталось попыток, отправьте код заново"},e=document.querySelector(".login__input-number"),r=document==null?void 0:document.querySelectorAll(".login__input-code"),g=document.querySelector(".login__phone-number-submit"),s=document.querySelector(".login__error-no-tel"),h=document.querySelector(".login__loader"),f=document.querySelector(".login__resend-code"),S=document.querySelector(".login__timer"),L=document.querySelector(".login__waiting-caption"),a=document.querySelector(".login__error-wrong-code"),m=o=>{const t=Math.floor(o/60),n=o%60,l=document.querySelector(".minutes"),i=document.querySelector(".seconds");l.textContent=t!==0?`${t} мин`:"",i.textContent=`${n} сек`,o<=0&&w()};S&&(m(v),p(m));const T={mask:"+{7} (000) 000-00-00",lazy:!0,overwrite:!0,prepare:o=>o,commit:o=>o===e.value};e==null||e.addEventListener("input",()=>{y(e,T)});let c=0;g==null||g.addEventListener("click",o=>{e.value.trim()===""?(o.preventDefault(),s.classList.add("login__error_show"),e.classList.add("login__input_error"),s.innerText=u.nullNumber,c++,c>1&&(s.classList.add("login__error_animated"),window.setTimeout(()=>{s.classList.remove("login__error_animated")},150))):e.value.trim().length<18?(o.preventDefault(),s.classList.add("login__error_show"),e.classList.add("login__input_error"),s.innerText=u.wrongNumber,c++,c>1&&(s.classList.add("login__error_animated"),window.setTimeout(()=>{s.classList.remove("login__error_animated")},150))):e.value.trim().length===18&&(s.classList.remove("login__error_show"),e.classList.remove("login__input_error"),sessionStorage.setItem("phone",e.value.trim()))});e==null||e.addEventListener("input",()=>{e.value.trim()!==""&&e.value.trim().length<6&&(s.classList.remove("login__error_show"),e.classList.remove("login__input_error")),e.value.trim().length===18&&(s.classList.remove("login__error_show"),e.classList.remove("login__input_error")),e.value.trim()==k?document.querySelector(".login__form_phone").action="login-base.html":document.querySelector(".login__form_phone").action="login-out-base.html"});e==null||e.addEventListener("keydown",o=>{if(["Enter","Tab","Backspace","Delete","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","0","1","2","3","4","5","6","7","8","9"].includes(o.key))return!0;o.preventDefault()});r==null||r.forEach(o=>o.addEventListener("keydown",t=>{if(["Enter","Backspace","Delete","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","0","1","2","3","4","5","6","7","8","9"].includes(t.key))return!0;t.preventDefault()}));document.addEventListener("DOMContentLoaded",()=>{location.pathname.includes("base")&&(document.querySelector(".login__number").innerText=sessionStorage.getItem("phone"))});r.forEach((o,t)=>o.addEventListener("keydown",n=>{if(n.target.value.trim()===""&&n.key=="Backspace"&&t>0)r[t-1].focus();else if(n.key!=="Backspace"&&t<r.length-1){const l=n.currentTarget.getAttribute("maxlength");n.currentTarget.value.length==l&&r[t+1].focus()}}));let _=[],d=3;r.forEach((o,t)=>o.addEventListener("input",n=>{if(n.target.value.trim()!==""&&(_[t]=n.target.value.trim()),_.length==4){const l=parseInt(document.querySelector(".seconds").innerText);_.join("")!==E?(a.classList.add("login__error_show"),d>1?(d--,a.innerHTML=`
          Вы ввели неверный код, осталось попыток:
         <span class="login__сode-attepmts">${d}</span>
         </div>`):a.innerText=u.noAttempts,r.forEach(i=>{i.classList.add("login__input_error"),i.value="",r[0].focus(),_=[]})):l>0?(document.querySelector(".login__error-wrong-code").classList.remove("login__error_show"),w(),r.forEach(i=>i.classList.remove("login__input_error"))):l<=0&&(a.classList.add("login__error_show"),r.forEach(i=>i.classList.add("login__input_error")),a.innerText=u.oldCode)}}));f==null||f.addEventListener("click",()=>{w(),m(v),p(m),a.classList.remove("login__error_show"),r.forEach(o=>{o.classList.remove("login__input_error"),o.value=null,r[0].focus()}),d=3});h&&setTimeout(()=>{h.classList.add("login_petal-error"),L.classList.add("login__waiting-error"),L.innerText="Ошибка связи",document.querySelector(".login__error-phone-submit").classList.add("login__error_show")},5e3);
