import{s as L,I as y,r as w}from"./index-98ae7fd2.js";const S="+7 (999) 999-99-99",T="1234",v=20,a={connectionCode:"Ошибка связи, отправьте код повторно",connection:"Ошибка связи",wrongCode:"Вы ввели неверный код, попробуйте ещё раз",wrongNumber:"Вы ввели некорректный номер телефона",nullNumber:"Введите номер телефона",oldCode:"Код устарел, отправьте новый",noAttempts:"У вас не осталось попыток, отправьте код заново"},o=document.querySelector(".login__input-number"),t=document==null?void 0:document.querySelectorAll(".login__input-code"),m=document.querySelector(".login__phone-number-submit"),s=document.querySelector(".login__error-no-tel"),h=document.querySelector(".login__loader"),g=document.querySelector(".login__resend-code"),k=document.querySelector(".login__timer"),p=document.querySelector(".login__waiting-caption"),c=document.querySelector(".login__error-wrong-code"),E=document.querySelector(".login__сode-attepmts"),u=e=>{const r=Math.floor(e/60),n=e%60,l=document.querySelector(".minutes"),i=document.querySelector(".seconds");l.textContent=r!==0?`${r} мин`:"",i.textContent=`${n} сек`,e<=0&&w()};k&&(u(v),L(u));const q={mask:"+{7} (000) 000-00-00",lazy:!0,overwrite:!0,prepare:e=>e,commit:e=>e===o.value};o==null||o.addEventListener("input",()=>{y(o,q)});let d=0;m==null||m.addEventListener("click",e=>{o.value.trim()===""?(e.preventDefault(),s.classList.add("login__error_show"),o.classList.add("login__input_error"),s.innerText=a.nullNumber,d++,d>1&&(s.classList.add("login__error_animated"),window.setTimeout(()=>{s.classList.remove("login__error_animated")},150))):o.value.trim().length<18?(e.preventDefault(),s.classList.add("login__error_show"),o.classList.add("login__input_error"),s.innerText=a.wrongNumber,d++,d>1&&(s.classList.add("login__error_animated"),window.setTimeout(()=>{s.classList.remove("login__error_animated")},150))):o.value.trim().length===18&&(s.classList.remove("login__error_show"),o.classList.remove("login__input_error"),sessionStorage.setItem("phone",o.value.trim()))});o==null||o.addEventListener("input",()=>{o.value.trim().length===18&&(s.classList.remove("login__error_show"),o.classList.remove("login__input_error")),o.value.trim()==S?document.querySelector(".login__form_phone").action="login-base.html":document.querySelector(".login__form_phone").action="login-out-base.html"});o==null||o.addEventListener("keydown",e=>{if(["Enter","Tab","Backspace","Delete","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","0","1","2","3","4","5","6","7","8","9"].includes(e.key))return!0;e.preventDefault()});t==null||t.forEach(e=>e.addEventListener("keydown",r=>{if(["Enter","Backspace","Delete","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","0","1","2","3","4","5","6","7","8","9"].includes(r.key))return!0;r.preventDefault()}));document.addEventListener("DOMContentLoaded",()=>{location.pathname.includes("base")&&(document.querySelector(".login__number").innerText=sessionStorage.getItem("phone"))});t.forEach((e,r)=>e.addEventListener("keydown",n=>{if(n.target.value.trim()===""&&n.key=="Backspace"&&r>0)t[r-1].focus();else if(n.key!=="Backspace"&&r<t.length-1){const l=n.currentTarget.getAttribute("maxlength");n.currentTarget.value.length==l&&t[r+1].focus()}}));let _=[],f=3;t.forEach((e,r)=>e.addEventListener("input",n=>{if(n.target.value.trim()!==""&&(_[r]=n.target.value.trim()),_.length==4){const l=parseInt(document.querySelector(".seconds").innerText);_.join("")!==T?(c.classList.add("login__error_show"),f>1?(f--,E.innerText=f):c.innerText=a.noAttempts,t.forEach(i=>{i.classList.add("login__input_error"),i.value="",t[0].focus(),_=[]})):l>0?(document.querySelector(".login__error-wrong-code").classList.remove("login__error_show"),w(),t.forEach(i=>i.classList.remove("login__input_error"))):l<=0&&(c.classList.add("login__error_show"),t.forEach(i=>i.classList.add("login__input_error")),c.innerText=a.oldCode)}}));g==null||g.addEventListener("click",()=>{w(),u(v),L(u),c.classList.remove("login__error_show"),t.forEach(e=>{e.classList.remove("login__input_error"),e.value=null,t[0].focus()}),setTimeout(()=>{c.innerText=a.wrongCode},400)});h&&setTimeout(()=>{h.classList.add("login_petal-error"),p.classList.add("login__waiting-error"),p.innerText="Ошибка связи",document.querySelector(".login__error-phone-submit").classList.add("login__error_show")},5e3);
