import{s as y,I as p,r as m}from"./index-98ae7fd2.js";const k="+7 (999) 999-99-99",E="1234",v=20,c={connectionCode:"Ошибка связи, отправьте код повторно",connection:"Ошибка связи",wrongCode:"Вы ввели неверный код, попробуйте ещё раз",wrongNumber:"Вы ввели некорректный номер телефона",nullNumber:"Введите номер телефона"},o=document.querySelector(".login__input-number"),n=document==null?void 0:document.querySelectorAll(".login__input-code"),_=document.querySelector(".login__phone-number-submit"),s=document.querySelector(".login__error-no-tel"),h=document.querySelector(".login__loader"),u=document.querySelector(".login__resend-code"),S=document.querySelector(".login__timer"),L=document.querySelector(".login__waiting-caption"),a=document.querySelector(".login__error-wrong-code"),d=e=>{const t=Math.floor(e/60),r=e%60,i=document.querySelector(".minutes"),w=document.querySelector(".seconds");i.textContent=`${t} мин`,w.textContent=r<10?`0${r} сек`:`${r} сек`,e<=0&&(m(),a.classList.add("login__error_show"),a.innerText=c.connectionCode,n.forEach(f=>{f.classList.add("login__input-code_error"),f.setAttribute("disabled","")}))};S&&(d(v),y(d));const q={mask:"+{7} (000) 000-00-00",lazy:!0,overwrite:!0,prepare:e=>e,commit:e=>e===o.value};o==null||o.addEventListener("focus",()=>{p(o,q)});let l=0;_==null||_.addEventListener("click",e=>{o.value.trim()===""?(e.preventDefault(),s.classList.add("login__error_show"),s.innerText=c.nullNumber,l++,l>1&&(s.classList.add("login__error_animated"),window.setTimeout(()=>{s.classList.remove("login__error_animated")},150))):o.value.trim().length<18?(e.preventDefault(),s.classList.add("login__error_show"),s.innerText=c.wrongNumber,l++,l>1&&(s.classList.add("login__error_animated"),window.setTimeout(()=>{s.classList.remove("login__error_animated")},150))):o.value.trim().length===18&&(s.classList.remove("login__error_show"),sessionStorage.setItem("phone",o.value.trim()))});o==null||o.addEventListener("input",()=>{o.value.trim()===k?document.querySelector(".login__form_phone").action="login-base.html":document.querySelector(".login__form_phone").action="login-out-base.html"});o==null||o.addEventListener("keydown",e=>{if(["Enter","Tab","Backspace","Delete","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","0","1","2","3","4","5","6","7","8","9"].includes(e.key))return!0;e.preventDefault()});n==null||n.forEach(e=>e.addEventListener("keydown",t=>{if(["Enter","Tab","Backspace","Delete","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","0","1","2","3","4","5","6","7","8","9"].includes(t.key))return!0;t.preventDefault()}));document.addEventListener("DOMContentLoaded",()=>{location.pathname.includes("base")&&(document.querySelector(".login__number").innerText=sessionStorage.getItem("phone"))});n.forEach((e,t)=>e.addEventListener("keydown",r=>{if(r.target.value.trim()===""&&r.key=="Backspace"&&t>0)n[t-1].focus();else if(r.key!=="Backspace"&&t<n.length-1){const i=r.currentTarget.getAttribute("maxlength");r.currentTarget.value.length==i&&n[t+1].focus()}}));const g=[];n.forEach((e,t)=>e.addEventListener("input",r=>{r.target.value.trim()!==""&&(g[t]=r.target.value.trim()),g.length==4&&(g.join("")!==E?(document.querySelector(".login__error-wrong-code").classList.add("login__error_show"),n.forEach(i=>i.classList.add("login__input-code_error"))):(document.querySelector(".login__error-wrong-code").classList.remove("login__error_show"),m(),n.forEach(i=>i.classList.remove("login__input-code_error"))))}));u==null||u.addEventListener("click",()=>{m(),d(v),y(d),a.classList.remove("login__error_show"),n.forEach(e=>{e.classList.remove("login__input-code_error"),e.removeAttribute("disabled")}),setTimeout(()=>{a.innerText=c.wrongCode},400)});h&&setTimeout(()=>{h.classList.add("login_petal-error"),L.classList.add("login__waiting-error"),L.innerText="Ошибка связи",document.querySelector(".login__error-phone-submit").classList.add("login__error_show")},5e3);
